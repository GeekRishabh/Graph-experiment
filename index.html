<!DOCTYPE html>



<html>

<head>
    <link rel="stylesheet" type="text/css" href="index.css">
    <script src="https://d3js.org/d3.v3.min.js"></script>
    <script src="./js/anychart-base.min.js" type="text/javascript"></script>
    <script>
        var x, y;
        window.onload = function () {
            var e = document.getElementById("import");
            document.getElementById('import').onclick = function () {
                var files = document.getElementById('selectFiles').files;
                console.log(files);
                if (files.length <= 0) {
                    return false;
                }

                var fr = new FileReader();
                fr.onload = function (e) {
                    console.log(e);
                    var result = JSON.parse(e.target.result);
                    var formatted = JSON.stringify(result, null, 2);
                    var object = formatted;
                    x = result.groups[0].peaks[0].eic.rt;
                    y = result.groups[0].peaks[0].eic.intensity;
                    // console.log(result.groups[0].peaks[0].eic.rt, 'x');
                    // console.log(result.groups[0].peaks[0].eic.intensity, 'y');
                    document.getElementById('result').value = formatted;

                    chart(x, y)

                }

                fr.readAsText(files.item(0));
            };

        };
    </script>
    <script>
        function chart(x, y) {
            console.log(x, y, 'Values');
            var data = [];
            var len = x.length;
            for (var i = 0; i < len; i++) {
                data.push({
                    x: x[i],
                    value: y[i]
                });
            }

            console.log(data, 'fdatda');
            anychart.onDocumentReady(function () {

                // this column represents JS equivalents every JSON object
                var chart = anychart.fromJson(
                    // set chart type
                    {
                        chart: {
                            type: "line",

                            // set series type
                            series: [{
                                seriesType: "spline",    // chart.spline(
                                // set series data
                                data: data
                            }],                            //   ]);

                            // set chart container
                            container: "container"
                        }
                    }          //   chart.container("container"); 
                ).draw();
            });
        }
    </script>
</head>

<body>

    <input type="file" id="selectFiles" value="Import" />
    <br />
    <button id="import">Import</button>
    <textarea id="result">
  
</textarea>
    <div id="container" style="width: 500px; height: 400px;"></div>
</body>

</html>